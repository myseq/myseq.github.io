<!doctype html><html lang=en dir=ltr class=scroll-smooth data-default-appearance=dark data-auto-appearance=false><head><meta charset=utf-8><meta http-equiv=content-language content="en"><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=X-UA-Compatible content="ie=edge"><title>Tunnelling with SSH Port Forwarding &#183; MySeq</title><meta name=title content="Tunnelling with SSH Port Forwarding &#183; MySeq"><meta name=description content="Quick notes on tunnelling with SSH port forwarding."><meta name=keywords content="101,cli,ssh,"><link rel=canonical href=https://myseq.github.io/posts/ssh_port_forwarding/><link type=text/css rel=stylesheet href=/css/main.bundle.min.a27f45a14bb6789dcac7185641a9b7fdc064430076644ec25670cc726d591b90d76148eee3d16c079cd7b603931c1663806b0013f6bdf47a589472eeec94a4b6.css integrity="sha512-on9FoUu2eJ3KxxhWQam3/cBkQwB2ZE7CVnDMcm1ZG5DXYUju49FsB5zXtgOTHBZjgGsAE/a99HpYlHLu7JSktg=="><script type=text/javascript src=/js/appearance.min.516a16745bea5a9bd011138d254cc0fd3973cd55ce6e15f3dec763e7c7c2c7448f8fe7b54cca811cb821b0c7e12cd161caace1dd794ac3d34d40937cbcc9ee12.js integrity="sha512-UWoWdFvqWpvQERONJUzA/TlzzVXObhXz3sdj58fCx0SPj+e1TMqBHLghsMfhLNFhyqzh3XlKw9NNQJN8vMnuEg=="></script><script defer type=text/javascript id=script-bundle src=/js/main.bundle.min.a2d78d78672e549fbfc972ece871725b5478ba0b65708dda20cb97ab80a865eae6d247e1b05a4aec6ebbf78647ec3233bad8b2609ed98eee53cd58aa17128bc7.js integrity="sha512-oteNeGcuVJ+/yXLs6HFyW1R4ugtlcI3aIMuXq4CoZerm0kfhsFpK7G6794ZH7DIzutiyYJ7Zju5TzViqFxKLxw==" data-copy data-copied></script><script src=/lib/zoom/zoom.min.37d2094687372da3f7343a221a470f6b8806f7891aa46a5a03966af7f0ebd38b9fe536cb154e6ad28f006d184b294525a7c4054b6bbb4be62d8b453b42db99bd.js integrity="sha512-N9IJRoc3LaP3NDoiGkcPa4gG94kapGpaA5Zq9/Dr04uf5TbLFU5q0o8AbRhLKUUlp8QFS2u7S+Yti0U7QtuZvQ=="></script><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest><meta name=google-site-verification content="G-CQL491X0G6"><meta property="og:url" content="https://myseq.github.io/posts/ssh_port_forwarding/"><meta property="og:site_name" content="MySeq"><meta property="og:title" content="Tunnelling with SSH Port Forwarding"><meta property="og:description" content="Quick notes on tunnelling with SSH port forwarding."><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-09-05T21:18:55+08:00"><meta property="article:modified_time" content="2023-09-05T21:18:55+08:00"><meta property="article:tag" content="101"><meta property="article:tag" content="cli"><meta property="article:tag" content="ssh"><meta name=twitter:card content="summary"><meta name=twitter:title content="Tunnelling with SSH Port Forwarding"><meta name=twitter:description content="Quick notes on tunnelling with SSH port forwarding."><script type=application/ld+json>[{"@context":"https://schema.org","@type":"Article","articleSection":"posts","name":"Tunnelling with SSH Port Forwarding","headline":"Tunnelling with SSH Port Forwarding","abstract":"Quick notes on tunnelling with SSH port forwarding.","inLanguage":"en","url":"https:\/\/myseq.github.io\/posts\/ssh_port_forwarding\/","author":{"@type":"Person","name":""},"copyrightYear":"2023","dateCreated":"2023-09-05T21:18:55\u002b08:00","datePublished":"2023-09-05T21:18:55\u002b08:00","dateModified":"2023-09-05T21:18:55\u002b08:00","keywords":["101","cli","ssh"],"mainEntityOfPage":"true","wordCount":"1310"}]</script><script src=/lib/jquery/jquery.slim.min.b0dca576e87d7eaa5850ae4e61759c065786cdb6489d68fcc82240539eebd5da522bdb4fda085ffd245808c8fe2acb2516408eb774ef26b5f6015fc6737c0ea8.js integrity="sha512-sNylduh9fqpYUK5OYXWcBleGzbZInWj8yCJAU57r1dpSK9tP2ghf/SRYCMj+KsslFkCOt3TvJrX2AV/Gc3wOqA=="></script><script defer type=text/javascript src=/js/mermaid.bundle.50b8f0f4aea3f588fe0e8eadacb89464c57327676eb40f8f8c05fa2e5ae360d7363bd359c34a8bb47306e480a0decde129e6552107708710ec58350fe67d93b4.js integrity="sha512-ULjw9K6j9Yj+Do6trLiUZMVzJ2dutA+PjAX6LlrjYNc2O9NZw0qLtHMG5ICg3s3hKeZVIQdwhxDsWDUP5n2TtA=="></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-CQL491X0G6"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-CQL491X0G6")</script><meta name=theme-color><script src=https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js></script><script src=https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js></script><script src=https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js></script><script>const firebaseConfig={apiKey:"AIzaSyAjMb5JN8Lt6eFYQxoun9GyzgSbFkcpluc",authDomain:"AIzaSyAjMb5JN8Lt6eFYQxoun9GyzgSbFkcpluc",projectId:"myseq-gh-pages",storageBucket:"myseq-gh-pages.appspot.com",messagingSenderId:"991404758454",appId:"1:991404758454:web:2cde04db7ae17a22135d17",measurementId:"G-HEVCNH0EFT"};var app=firebase.initializeApp(firebaseConfig),db=firebase.firestore(),auth=firebase.auth()</script></head><body class="flex flex-col h-screen px-6 m-auto text-lg leading-7 max-w-7xl bg-neutral text-neutral-900 dark:bg-neutral-800 dark:text-neutral sm:px-14 md:px-24 lg:px-32 scrollbar-thin scrollbar-track-neutral-200 scrollbar-thumb-neutral-400 dark:scrollbar-track-neutral-800 dark:scrollbar-thumb-neutral-600"><div id=the-top class="absolute flex self-center"><a class="px-3 py-1 text-sm -translate-y-8 rounded-b-lg bg-primary-200 focus:translate-y-0 dark:bg-neutral-600" href=#main-content><span class="font-bold text-primary-600 ltr:pr-2 rtl:pl-2 dark:text-primary-400">&darr;</span>Skip to main content</a></div><div style=padding-left:0;padding-right:0;padding-top:2px;padding-bottom:3px class="main-menu flex items-center justify-between px-4 py-6 sm:px-6 md:justify-start space-x-3"><div><a href=/ class=flex><span class=sr-only>MySeq</span>
<img src=/img/phoenix_512_1.png width=256 height=256 class="logo max-h-[5rem] max-w-[5rem] object-scale-down object-left nozoom" alt=MySeq></a></div><div class="flex flex-1 items-center justify-between"><nav class="flex space-x-3"><a href=/ class="text-base font-medium text-gray-500 hover:text-gray-900">MySeq</a></nav><nav class="hidden md:flex items-center space-x-5 md:ml-12 h-12"><a href=/about/ class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><p class="text-base font-medium" title>About</p></a><a href=/posts/ class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><p class="text-base font-medium" title>Blog</p></a><div><div class="cursor-pointer flex items-center nested-menu"><a href=/content/ class="text-base font-medium text-gray-500 hover:text-primary-600 dark:hover:text-primary-400" title>Content
</a><span><span class="relative block icon"><svg viewBox="0 0 20 20" fill="currentcolor" aria-hidden="true"><path fill-rule="evenodd" d="M5.23 7.21a.75.75.0 011.06.02L10 11.168l3.71-3.938a.75.75.0 111.08 1.04l-4.25 4.5a.75.75.0 01-1.08.0l-4.25-4.5a.75.75.0 01.02-1.06z" clip-rule="evenodd"/></svg></span></span></div><div class="absolute menuhide"><div class="pt-2 p-5 mt-2 rounded-xl backdrop-blur shadow-2xl"><div class="flex flex-col space-y-3"><a href=/notes/ class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><p class="text-sm font-sm" title>Cliff Notes</p></a><a href=/tedtalk/ class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><p class="text-sm font-sm" title>TEDTalks</p></a><a href=/wisdom/ class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><p class="text-sm font-sm" title>Wisdom Bread</p></a><a href=/links/ class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><p class="text-sm font-sm" title>Links</p></a><a href class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><p class="text-sm font-sm" title><hr></p></a><a href=/plan/ class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><p class="text-sm font-sm" title>~/.plan</p></a><a href=/projects/ class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><p class="text-sm font-sm" title>~/.projects</p></a><a href=/voice/ class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><p class="text-sm font-sm" title>~/.voice</p></a></div></div></div></div><div><div class="cursor-pointer flex items-center nested-menu"><a href=/online/ class="text-base font-medium text-gray-500 hover:text-primary-600 dark:hover:text-primary-400" title>[online]
</a><span><span class="relative block icon"><svg viewBox="0 0 20 20" fill="currentcolor" aria-hidden="true"><path fill-rule="evenodd" d="M5.23 7.21a.75.75.0 011.06.02L10 11.168l3.71-3.938a.75.75.0 111.08 1.04l-4.25 4.5a.75.75.0 01-1.08.0l-4.25-4.5a.75.75.0 01.02-1.06z" clip-rule="evenodd"/></svg></span></span></div><div class="absolute menuhide"><div class="pt-2 p-5 mt-2 rounded-xl backdrop-blur shadow-2xl"><div class="flex flex-col space-y-3"><a href=https://cisakev.taipy.cloud/ target=_blank class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><p class="text-sm font-sm" title>[ KEV@TaipyCloud ]</p></a></div></div></div></div><a href=https://github.com/myseq target=_blank class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><span><span class="relative block icon"><svg viewBox="0 0 496 512"><path fill="currentcolor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6.0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6.0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3.0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1.0-6.2-.3-40.4-.3-61.4.0.0-70 15-84.7-29.8.0.0-11.4-29.1-27.8-36.6.0.0-22.9-15.7 1.6-15.4.0.0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5.0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9.0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4.0 33.7-.3 75.4-.3 83.6.0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6.0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9.0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg></span></span><p class="text-base font-medium" title></p></a><button id=search-button aria-label=Search class="text-base hover:text-primary-600 dark:hover:text-primary-400" title>
<span class="relative block icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" viewBox="0 0 512 512"><path fill="currentcolor" d="M505 442.7 405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9.0 208 0S0 93.1.0 208s93.1 208 208 208c48.3.0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9.0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7.0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7.0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg></span></button></nav><div class="flex md:hidden items-center space-x-5 md:ml-12 h-12"><span></span>
<button id=search-button-mobile aria-label=Search class="text-base hover:text-primary-600 dark:hover:text-primary-400" title>
<span class="relative block icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" viewBox="0 0 512 512"><path fill="currentcolor" d="M505 442.7 405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9.0 208 0S0 93.1.0 208s93.1 208 208 208c48.3.0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9.0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7.0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7.0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg></span></button></div></div><div class="-my-2 -mr-2 md:hidden"><label id=menu-button class=block><div class="cursor-pointer hover:text-primary-600 dark:hover:text-primary-400"><span class="relative block icon"><svg viewBox="0 0 448 512"><path fill="currentcolor" d="M0 96C0 78.33 14.33 64 32 64H416c17.7.0 32 14.33 32 32 0 17.7-14.3 32-32 32H32C14.33 128 0 113.7.0 96zM0 256c0-17.7 14.33-32 32-32H416c17.7.0 32 14.3 32 32s-14.3 32-32 32H32c-17.67.0-32-14.3-32-32zM416 448H32c-17.67.0-32-14.3-32-32s14.33-32 32-32H416c17.7.0 32 14.3 32 32s-14.3 32-32 32z"/></svg></span></div><div id=menu-wrapper style=padding-top:5px class="fixed inset-0 z-30 invisible w-screen h-screen m-0 overflow-auto transition-opacity opacity-0 cursor-default bg-neutral-100/50 backdrop-blur-sm dark:bg-neutral-900/50"><ul class="flex space-y-2 mt-3 flex-col items-end w-full px-6 py-6 mx-auto overflow-visible list-none ltr:text-right rtl:text-left max-w-7xl"><li id=menu-close-button><span class="cursor-pointer inline-block align-text-bottom hover:text-primary-600 dark:hover:text-primary-400"><span class="relative block icon"><svg viewBox="0 0 320 512"><path fill="currentcolor" d="M310.6 361.4c12.5 12.5 12.5 32.75.0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3 54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75.0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75.0-45.25s32.75-12.5 45.25.0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25.0s12.5 32.75.0 45.25l-105.4 105.4L310.6 361.4z"/></svg></span></span></li><li class=mt-1><a href=/about/ class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><p class="text-bg font-bg" title>About</p></a></li><li class=mt-1><a href=/posts/ class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><p class="text-bg font-bg" title>Blog</p></a></li><li class=mt-1><a href=/content/ class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><p class="text-bg font-bg" title>Content</p><span><span class="relative block icon"><svg viewBox="0 0 20 20" fill="currentcolor" aria-hidden="true"><path fill-rule="evenodd" d="M5.23 7.21a.75.75.0 011.06.02L10 11.168l3.71-3.938a.75.75.0 111.08 1.04l-4.25 4.5a.75.75.0 01-1.08.0l-4.25-4.5a.75.75.0 01.02-1.06z" clip-rule="evenodd"/></svg></span></span></a></li><li class=mt-1><a href=/notes/ class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><p class="text-sm font-small" title>Cliff Notes</p></a></li><li class=mt-1><a href=/tedtalk/ class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><p class="text-sm font-small" title>TEDTalks</p></a></li><li class=mt-1><a href=/wisdom/ class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><p class="text-sm font-small" title>Wisdom Bread</p></a></li><li class=mt-1><a href=/links/ class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><p class="text-sm font-small" title>Links</p></a></li><li class=mt-1><a href class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><p class="text-sm font-small" title><hr></p></a></li><li class=mt-1><a href=/plan/ class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><p class="text-sm font-small" title>~/.plan</p></a></li><li class=mt-1><a href=/projects/ class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><p class="text-sm font-small" title>~/.projects</p></a></li><li class=mt-1><a href=/voice/ class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><p class="text-sm font-small" title>~/.voice</p></a></li><li class=mb-2></li><li class=mt-1><a href=/online/ class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><p class="text-bg font-bg" title>[online]</p><span><span class="relative block icon"><svg viewBox="0 0 20 20" fill="currentcolor" aria-hidden="true"><path fill-rule="evenodd" d="M5.23 7.21a.75.75.0 011.06.02L10 11.168l3.71-3.938a.75.75.0 111.08 1.04l-4.25 4.5a.75.75.0 01-1.08.0l-4.25-4.5a.75.75.0 01.02-1.06z" clip-rule="evenodd"/></svg></span></span></a></li><li class=mt-1><a href=https://cisakev.taipy.cloud/ target=_blank class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><p class="text-sm font-small" title>[ KEV@TaipyCloud ]</p></a></li><li class=mb-2></li><li class=mt-1><a href=https://github.com/myseq target=_blank class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><div><span class="relative block icon"><svg viewBox="0 0 496 512"><path fill="currentcolor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6.0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6.0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3.0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1.0-6.2-.3-40.4-.3-61.4.0.0-70 15-84.7-29.8.0.0-11.4-29.1-27.8-36.6.0.0-22.9-15.7 1.6-15.4.0.0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5.0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9.0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4.0 33.7-.3 75.4-.3 83.6.0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6.0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9.0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg></span></div><p class="text-bg font-bg" title></p></a></li></ul></div></label></div></div><script>(function(){var e=$(".main-menu"),t=window.location.pathname;e.find('a[href="'+t+'"]').each(function(e,t){$(t).children("p").addClass("active")})})()</script><div class="relative flex flex-col grow"><main id=main-content class=grow><article><div id=hero class="h-[150px] md:h-[200px]"></div><div class="fixed inset-x-0 top-0 h-[800px] single_hero_background nozoom" style=background-image:url(/images/pexels-neo-html_hu6291113278460248493.jpeg)><div class="absolute inset-0 bg-gradient-to-t from-neutral dark:from-neutral-800 to-transparent mix-blend-normal"></div><div class="absolute inset-0 opacity-60 bg-gradient-to-t from-neutral dark:from-neutral-800 to-neutral-100 dark:to-neutral-800 mix-blend-normal"></div></div><div id=background-blur class="fixed opacity-0 inset-x-0 top-0 h-full single_hero_background nozoom backdrop-blur-2xl"></div><script>window.addEventListener("scroll",function(){var t=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,n=document.getElementById("background-blur");n.style.opacity=t/300})</script><header id=single_header class="mt-5 max-w-prose"><h1 class="mt-0 text-4xl font-extrabold text-neutral-900 dark:text-neutral">Tunnelling with SSH Port Forwarding</h1><div class="mt-1 mb-6 text-base text-neutral-500 dark:text-neutral-400 print:hidden"><div class="flex flex-row flex-wrap items-center"><time datetime=2023-09-05T21:18:55+08:00>2023-09-05 21:18</time><span class="px-2 text-primary-500">&#183;</span><span>1310 words</span><span class="px-2 text-primary-500">&#183;</span><span title="Reading time">7 mins</span></div><div class="flex flex-row flex-wrap items-center"></div><div class="flex flex-row flex-wrap items-center"><span style=margin-top:.5rem class=mr-2 onclick='return window.open("/categories/posts/","_self"),!1'><span class=flex style=cursor:pointer><span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">Posts
</span></span></span><span style=margin-top:.5rem class=mr-2 onclick='return window.open("/tags/101/","_self"),!1'><span class=flex style=cursor:pointer><span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">101
</span></span></span><span style=margin-top:.5rem class=mr-2 onclick='return window.open("/tags/cli/","_self"),!1'><span class=flex style=cursor:pointer><span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">cli
</span></span></span><span style=margin-top:.5rem class=mr-2 onclick='return window.open("/tags/ssh/","_self"),!1'><span class=flex style=cursor:pointer><span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">ssh</span></span></span></div></div></header><section class="flex flex-col max-w-full mt-0 prose dark:prose-invert lg:flex-row"><div class="order-first lg:ml-auto px-0 lg:order-last ltr:lg:pl-8 rtl:lg:pr-8"><div class="toc ltr:pl-5 rtl:pr-5 print:hidden lg:sticky lg:top-10"><details open id=TOCView class="toc-right mt-0 overflow-y-scroll overscroll-contain scrollbar-thin scrollbar-track-neutral-200 scrollbar-thumb-neutral-400 dark:scrollbar-track-neutral-800 dark:scrollbar-thumb-neutral-600 rounded-lg ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 hidden lg:block"><summary class="block py-1 text-lg font-semibold cursor-pointer bg-neutral-100 text-neutral-800 ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 dark:bg-neutral-700 dark:text-neutral-100 lg:hidden">Table of Contents</summary><div class="min-w-[220px] py-2 border-dotted ltr:-ml-5 ltr:border-l ltr:pl-5 rtl:-mr-5 rtl:border-r rtl:pr-5 dark:border-neutral-600"><nav id=TableOfContents><ul><li><a href=#ssh-tunnelling>SSH Tunnelling</a><ul><li><a href=#ssh-local-port-forwarding>SSH Local Port Forwarding</a><ul><li><a href=#scenario-1-left>Scenario 1 (left)</a></li><li><a href=#scenario-2-right>Scenario 2 (right)</a></li></ul></li><li><a href=#ssh-remote-port-forwarding>SSH Remote Port Forwarding</a><ul><li><a href=#scenario>Scenario</a></li></ul></li><li><a href=#ssh-dynamic-port-forwarding>SSH Dynamic Port Forwarding</a><ul><li><a href=#scenario-1>Scenario</a></li></ul></li></ul></li><li><a href=#additional-tips>Additional Tips</a><ul><li><a href=#tunnelling-detection>Tunnelling Detection</a></li><li><a href=#tools-for-ssh-tunnelling>Tools for SSH Tunnelling</a></li></ul></li><li><a href=#about-ssh--protocol-stack>About SSH Protocol Stack</a></li><li><a href=#links>Links</a></li></ul></nav></div></details><details class="toc-inside mt-0 overflow-hidden rounded-lg ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 lg:hidden"><summary class="py-1 text-lg font-semibold cursor-pointer bg-neutral-100 text-neutral-800 ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 dark:bg-neutral-700 dark:text-neutral-100 lg:hidden">Table of Contents</summary><div class="py-2 border-dotted border-neutral-300 ltr:-ml-5 ltr:border-l ltr:pl-5 rtl:-mr-5 rtl:border-r rtl:pr-5 dark:border-neutral-600"><nav id=TableOfContents><ul><li><a href=#ssh-tunnelling>SSH Tunnelling</a><ul><li><a href=#ssh-local-port-forwarding>SSH Local Port Forwarding</a><ul><li><a href=#scenario-1-left>Scenario 1 (left)</a></li><li><a href=#scenario-2-right>Scenario 2 (right)</a></li></ul></li><li><a href=#ssh-remote-port-forwarding>SSH Remote Port Forwarding</a><ul><li><a href=#scenario>Scenario</a></li></ul></li><li><a href=#ssh-dynamic-port-forwarding>SSH Dynamic Port Forwarding</a><ul><li><a href=#scenario-1>Scenario</a></li></ul></li></ul></li><li><a href=#additional-tips>Additional Tips</a><ul><li><a href=#tunnelling-detection>Tunnelling Detection</a></li><li><a href=#tools-for-ssh-tunnelling>Tools for SSH Tunnelling</a></li></ul></li><li><a href=#about-ssh--protocol-stack>About SSH Protocol Stack</a></li><li><a href=#links>Links</a></li></ul></nav></div></details><script>var margin=200,marginError=50;(function(){var t=$(window),e=$("#TOCView"),s=e.height();function n(){var n=t.height()-margin;s>=n?(e.css("overflow-y","scroll"),e.css("max-height",n+marginError+"px")):(e.css("overflow-y","hidden"),e.css("max-height","9999999px"))}t.on("resize",n),$(document).ready(n)})(),function(){var t,e=$("#TableOfContents");if(e.length>0){t=$(window);function n(){var s,o=t.scrollTop(),i=$(".anchor"),n="";if(i.each(function(e,t){t=$(t),t.offset().top-$(window).height()/3<=o&&(n=decodeURIComponent(t.attr("id")))}),s=e.find("a.active"),s.length==1&&s.eq(0).attr("href")=="#"+n)return!0;s.each(function(e,t){$(t).removeClass("active")}),e.find('a[href="#'+n+'"]').addClass("active"),e.find('a[href="#'+n+'"]').parentsUntil("#TableOfContents").each(function(e,t){$(t).children("a").parents("ul").show()})}t.on("scroll",n),$(document).ready(function(){n()})}}()</script></div></div><div class="min-w-0 min-h-0 max-w-fit"><div class="article-content max-w-prose mb-20"><h2 class="relative group">SSH Tunnelling<div id=ssh-tunnelling class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#ssh-tunnelling aria-label=Anchor>#</a></span></h2><p><code>SSH Tunnelling</code> is often used to create an encrypted connection between local machine and a remote server which relay traffic. Through the secure tunnel, it can protect unencrypted traffic, such as VNC or database connection, from being eavesdropping.</p><p>Depends on the situation, there are 3 ways to create tunnelling with SSH port forwarding.</p><ul><li>Local port forwarding</li><li>Remote port forwarding</li><li>Dynamic port forwarding</li></ul><p>Choosing which tunnelling depends on the firewall configuration. Refer to the <code>prerequisite</code> sections below.</p><h3 class="relative group">SSH Local Port Forwarding<div id=ssh-local-port-forwarding class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#ssh-local-port-forwarding aria-label=Anchor>#</a></span></h3><p>SSH <code>local port forwarding</code> allows you to securely access a service running on a remote server through an encrypted SSH tunnel.</p><blockquote><p><code>Prerequisite</code>
<em><strong>Local port forwarding</strong></em> can only be used provided you can successfully establish a SSH connection (22/tcp) to the SSH server through the firewall. This means the firewall has to grant access to to SSH server on port 22/tcp.</p></blockquote><div class=mermaid align=center>graph
fw1{{fw_allow}}
fw2{{fw_block}}
subgraph main[Prerequisite: Firewall Requirement]
direction RL
subgraph grant[Success: Allow incoming SSH port]
direction LR
client1 --> |22/tcp| fw1 --> |dport:22| sshd1
end
subgraph fail[FAIL: incoming SSH port is blocked]
direction LR
client2 --> |22/tcp| fw2 --> sshd2
end
end
linkStyle default stroke-width:4px
linkStyle 0 stroke:yellow
linkStyle 1 stroke-width:3px,stroke:green
linkStyle 2 stroke:yellow
linkStyle 3 stroke:red
classDef Allow color:#0ff
classDef Block color:#f00
class grant Allow
class fail Block</div><p>Here&rsquo;s the cmdline to create a SSH local port forwarding:
<code>ssh -L [bind_addr]:&lt;port>:&lt;host>:&lt;host_port> &lt;ssh_server></code></p><p>Below is the diagram to show how <code>local port forwarding</code> connection works:</p><ol><li>Established the secure tunnel [blue]</li><li>Connect from <em>client(*)</em> to web1:8080 (or web2:9090) in clear text traffic [yellow]</li></ol><div class=mermaid align=center>graph BT
ssh_1(["web1:8080
ssh_svr:22"])
fw_1{{firewall}}
cli_1((client:8080))
cli_2((client:9090))
fw_2{{firewall}}
ssh_2["ssh_svr:22"]
web2(["web2:9090"])
subgraph main[Local Port Forwarding]
direction BT
subgraph DC[Datacenter]
direction BT
fw_1 ==> |dport:22| ssh_1
ssh_1 -.-> |dport:8080| ssh_1
fw_2 ==> |dport:22| ssh_2
ssh_2 -.-> |dport:9090| web2
end
subgraph Home[Remote]
direction BT
cli_1 === |22/tcp| fw_1
cli_1 -.-> |dport:8080| cli_1
cli_2 === |22/tcp| fw_2
* -.-> |dport:9090| cli_2
end
end
linkStyle default stroke-width:4px,stroke:red
linkStyle 0 stroke-width:4px,stroke:blue
linkStyle 1 stroke-width:5px,stroke:yellow
linkStyle 2 stroke-width:4px,stroke:blue
linkStyle 3 stroke-width:4px,stroke:yellow
linkStyle 4 stroke-width:4px,stroke:blue
linkStyle 5 stroke-width:4px,stroke:yellow
linkStyle 6 stroke-width:4px,stroke:blue
linkStyle 7 stroke-width:4px,stroke:yellow
classDef main font-size:20px,color:#f66
classDef Group1 color:#0ff
classDef Group2 color:#0f0
class main main
class DC Group1
class Home Group2</div><p>The flow diagram on the left, is a typical way how remote worker can establish remote access with <code>local port forwarding</code>. However, it can be extended to the flow diagram at the right, to allow other to access web server (web2 at port 9090/tcp).</p><h4 class="relative group">Scenario 1 (left)<div id=scenario-1-left class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#scenario-1-left aria-label=Anchor>#</a></span></h4><p>Run the below cmdline at client, and point the (client) browser to <code>http://localhost:8080</code>, should be connecting to <code>http://web1:8080</code></p><blockquote><p><code>ssh -L 8080:web1:8080 user@ssh_svr</code></p></blockquote><h4 class="relative group">Scenario 2 (right)<div id=scenario-2-right class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#scenario-2-right aria-label=Anchor>#</a></span></h4><p>Run the below cmdline at client, and allow other&rsquo;s to browse at <code>http://client:9090</code>, should be connecting to <code>http://web2:9090</code></p><blockquote><p><code>ssh -L 0.0.0.0:9090:web2:9090 user@ssh_svr</code></p></blockquote><h3 class="relative group">SSH Remote Port Forwarding<div id=ssh-remote-port-forwarding class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#ssh-remote-port-forwarding aria-label=Anchor>#</a></span></h3><p>SSH <code>remote port forwarding</code> allows remote server to access a service running on local machine/network through an encrypted SSH tunnel.</p><blockquote><p><code>Prerequisite</code>
<em><strong>Remote port forwarding</strong></em> is only useful when you have a SSH server that locates at the Internet and is accessible by both client and remote worksapce.</p></blockquote><p>Here’s the cmdline to create a SSH remote port forwarding:
<code>ssh -R [bind_addr]:&lt;port>:&lt;host>:&lt;host_port> &lt;ssh_server></code></p><p>Below is the diagram to show how <code>remote port forwarding</code> connection works:</p><ol><li>Established the secure tunnel [blue]</li><li>Connect from remote to web:8080 in clear text traffic [yellow]</li></ol><div class=mermaid align=center>graph
direction LR
sshd(["sshd:22
fport:80"])
client(["client"])
demo["web:8080"]
remote((remote))
subgraph main[Remote Port Forwarding: remote -> web:8080]
subgraph intra[Intranet]
client --> |8080/tcp| demo
end
subgraph cloud[Internet]
sshd
remote --> |80/tcp| sshd
end
client --> |22/tcp| sshd
end
linkStyle default stroke-width:4px
linkStyle 0 stroke:yellow
linkStyle 1 stroke:yellow
linkStyle 2 stroke:blue
classDef Block color:#0ff
classDef Title color:#f66
class main Title
class cloud,intra Block</div><h4 class="relative group">Scenario<div id=scenario class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#scenario aria-label=Anchor>#</a></span></h4><p>Run the cmdline below at the <strong>client</strong> to establish the tunnel. Then the <strong>remote</strong> workspace can browse to http://fport:80 and the traffic will be redirected to http://web:8080.</p><blockquote><p><code>ssh -R 0.0.0.0:80:web:8080 user@sshd</code>
In this case, the fport can be the same IP address as sshd.</p></blockquote><h3 class="relative group">SSH Dynamic Port Forwarding<div id=ssh-dynamic-port-forwarding class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#ssh-dynamic-port-forwarding aria-label=Anchor>#</a></span></h3><p>SSH <code>dynamic port forwarding</code> provides greater flexibility for client to connect into Intranet (or datacenter) via SOCKS proxy server.</p><blockquote><p><code>Prerequisite</code>
<em><strong>Dynamic port forwarding</strong></em> turns on the SOCKS proxy at SSH server. It allows the client browser to connect to <em><strong>any</strong></em> server behind SSHD server with the SOCKs proxy config. And all these must require access to SSHD server at port 22/tcp, (similar to local port forwarding setup).</p><p>SOCK DNS setup:
At Firefox browser, setup <code>about:config > network.proxy.socks_remote_dns;true</code></p></blockquote><p>Here&rsquo;s the cmdline to create a SSH dynamic port forwarding:
<code>ssh -D [bind_addr]:&lt;port> &lt;ssh_server></code></p><p>Below is the diagram to show how <code>dynamic port forwarding</code> connection works:</p><ol><li>Established the secure tunnel [blue]</li><li>Setup SOCK proxy at browser by pointing to client and SOCK port.</li><li>Ensure SOCK DNS is configured (see above).</li></ol><div class=mermaid align=center>graph
client(["client:1080"])
local(["client:1080"])
sshd(["sshd:22"])
http(["web:80"])
https(["web:443"])
fw{{firewall}}
subgraph main[Dynamic Port Forwarding: client -> http or https]
direction BT
subgraph DC[Intranet]
direction BT
fw --> |dport:22| sshd
sshd --> |80/tcp| http
sshd --> |443/tcp| https
end
subgraph cloud[Remote]
direction BT
client === |22/tcp| fw
* --> |1080/tcp| client
local === |22/tcp| fw
local -.-> |1080/tcp| local
end
end
linkStyle default stroke-width:4px
linkStyle 0 stroke:blue
linkStyle 1 stroke:yellow
linkStyle 2 stroke:cyan
linkStyle 3,5 stroke:blue
linkStyle 4,6 stroke:cyan
classDef Title color:#f66
classDef subTitle color:#0ff
class main Title
class cloud,DC subTitle</div><h4 class="relative group">Scenario<div id=scenario-1 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#scenario-1 aria-label=Anchor>#</a></span></h4><p>Run the cmdline below at the <strong>client</strong> to establish the tunnel. Then configure the browser SOCK proxy and pointing to socks://client:1080 with <strong>remote SOCK DNS</strong> setup (for SSHD server to resolve the destination dynamically), then the browser will able to browse to any HTTP/HTTPS server behind the SSHD server.</p><blockquote><p><code>ssh -D 1080 user@sshd</code></p></blockquote><h2 class="relative group">Additional Tips<div id=additional-tips class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#additional-tips aria-label=Anchor>#</a></span></h2><p>To disable remote shell when creating tunnel (port forwarding), use <code>-N</code>.</p><p>To make SSH session into background, add the <code>-f</code>.</p><p>Additional 2 options can be applied while creating tunnel (port forwarding) as below:</p><ul><li><code>ssh -f -n -N ... user@ssh_server</code></li></ul><blockquote><pre tabindex=0><code>   -f    To run/put SSH request at background. 

   -N    To disable remote shell cmd execution. 

   -n    Redirects stdin from /dev/null (no input from stdin). 
         Must used together with -f (backfround).
</code></pre></blockquote><h3 class="relative group">Tunnelling Detection<div id=tunnelling-detection class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#tunnelling-detection aria-label=Anchor>#</a></span></h3><p>Due to the nature of how SSH protocol works, it is possible for firewall, such as Palo Alto firewall (PAN-OS), to allow SSH traffic but blocking the SSH tunnelling.</p><blockquote><p><em>The firewall checks the traffic between the client and server to see if it is routed normally or if it uses SSH port forwarding (SSH tunneling). If the firewall identifies SSH port forwarding, the firewall blocks the tunneled traffic and restricts it according to the configured Security policy. The firewall only looks for SSH port forwarding, it does not perform content and threat inspection on SSH tunnels.</em></p></blockquote><ul><li>PAN-OS Adminitrator Guide: <a href=https://docs.paloaltonetworks.com/pan-os/10-1/pan-os-admin/decryption/decryption-concepts/ssh-proxy target=_blank>SSH Proxy</a></li><li>Metallic Code: <a href=https://www.metalliccode.com/detecting-ssh-tunnels target=_blank>Detecting SSH Tunnels</a></li><li>Trisul: <a href=https://www.trisul.org/blog/traffic-analysis-of-secure-shell-ssh/#detecttunnel target=_blank>Traffic analysis of Secure Shell (SSH)</a></li><li>Trisul: <a href=https://www.trisul.org/blog/detecting-ssh-tunnels/ target=_blank>Detecting SSH Tunnels</a></li></ul><h3 class="relative group">Tools for SSH Tunnelling<div id=tools-for-ssh-tunnelling class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#tools-for-ssh-tunnelling aria-label=Anchor>#</a></span></h3><p>These are the tools used for automating SSH tunnelling creation.</p><ul><li><a href=http://www.harding.motd.ca/autossh/ target=_blank>autossh</a></li><li><a href=https://github.com/pahaz/sshtunnel/ target=_blank>sshtunnel</a></li><li>Cloudflare: <a href=https://www.cloudflare.com/products/tunnel/ target=_blank>Tunnel</a></li><li><a href=https://ngrok.com/ target=_blank>ngrok</a></li></ul><h2 class="relative group">About SSH Protocol Stack<div id=about-ssh--protocol-stack class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#about-ssh--protocol-stack aria-label=Anchor>#</a></span></h2><p>SSH is organized as 3 protocols that run on top of TCP: SSH User Authentication Protocol, SSH Connection Protocol, SSH Transport Layer Protocol.</p><details><summary><b>SSH Transport Layer</b></summary><ul><li>responsbile for server authentication, confgidentiality, integrity and compression.</li><li>focus on the 3 functions: Host Keys, Packet Exchange, and Key Generation.</li></ul></details><details><summary><b>SSH User Authentication Protocol</b></summary><ul><li>responsbile for authenticates user/client to the server.</li><li>focus on main 3 functions: Message Types and Formats, Message Exchange and Authentication Methods.</li></ul></details><details><summary><b>SSH Connection Protocol</b></summary><ul><li>responsible for multiplexes the encrypted tunnel into several logical channel.</li><li>focus on main 3 functions: Channel Mechanism, Channel Types and Port Forwarding.</li></ul></details><pre tabindex=0><code>+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|         SSH_User_Auth         |         SSH_Connection        |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                                                               |
+                      SSH_Transport_Layer                      +
|                                                               |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                              TCP                              |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                               IP                              |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
</code></pre><p>Here&rsquo;s the cmd that I generate the SSH protocol stack above:
<code>$ protocol "SSH_User_Auth:16,SSH_Connection:16,SSH_Transport_Layer:64,TCP:32,IP:32" -n</code></p><h2 class="relative group">Links<div id=links class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#links aria-label=Anchor>#</a></span></h2><ul><li><a href=https://www.chiragbhalodia.com/2022/05/ssh-and-ssh-protocol-stack.html target=_blank>SSH Protocol Stack</a></li><li><a href=https://github.com/trisulnsm/trisul-scripts target=_blank>Trisul-scripts</a></li><li>HoldMyBeer: <a href=https://holdmybeersecurity.com/2019/04/17/detecting-ssh-brute-forcing-with-zeek/ target=_blank>Detecting SSH Brute Forcing with Zeek</a></li><li>Mozilla <a href=https://infosec.mozilla.org/guidelines/openssh target=_blank>OpenSSH Security Guide</a>: Providing a sane baseline policy recommendation for SSH configuration parameters (eg. Ciphers, MACs, and KexAlgos).</li></ul></div><div class="flex author"><div class=place-self-center><div class="text-2xl sm:text-lg"></div></div></div><div class=mb-10></div><section class="flex flex-row flex-wrap justify-center pt-4 text-xl"><a target=_blank class="m-1 rounded bg-neutral-300 p-1.5 text-neutral-700 hover:bg-primary-500 hover:text-neutral dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https://myseq.github.io/posts/ssh_port_forwarding/&amp;title=Tunnelling%20with%20SSH%20Port%20Forwarding" title="Share on LinkedIn" aria-label="Share on LinkedIn"><span class="relative block icon"><svg viewBox="0 0 448 512"><path fill="currentcolor" d="M416 32H31.9C14.3 32 0 46.5.0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6.0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3.0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2.0 38.5 17.3 38.5 38.5.0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6.0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2.0 79.7 44.3 79.7 101.9V416z"/></svg>
</span></a><a target=_blank class="m-1 rounded bg-neutral-300 p-1.5 text-neutral-700 hover:bg-primary-500 hover:text-neutral dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800" href="https://twitter.com/intent/tweet/?url=https://myseq.github.io/posts/ssh_port_forwarding/&amp;text=Tunnelling%20with%20SSH%20Port%20Forwarding" title="Tweet on Twitter" aria-label="Tweet on Twitter"><span class="relative block icon"><svg viewBox="0 0 512 512"><path fill="currentcolor" d="M389.2 48h70.6L305.6 224.2 487 464H345L233.7 318.6 106.5 464H35.8L200.7 275.5 26.8 48H172.4L272.9 180.9 389.2 48zM364.4 421.8h39.1L151.1 88h-42L364.4 421.8z"/></svg>
</span></a><a target=_blank class="m-1 rounded bg-neutral-300 p-1.5 text-neutral-700 hover:bg-primary-500 hover:text-neutral dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800" href="https://reddit.com/submit/?url=https://myseq.github.io/posts/ssh_port_forwarding/&amp;resubmit=true&amp;title=Tunnelling%20with%20SSH%20Port%20Forwarding" title="Submit to Reddit" aria-label="Submit to Reddit"><span class="relative block icon"><svg viewBox="0 0 512 512"><path fill="currentcolor" d="M201.5 305.5c-13.8.0-24.9-11.1-24.9-24.6.0-13.8 11.1-24.9 24.9-24.9 13.6.0 24.6 11.1 24.6 24.9.0 13.6-11.1 24.6-24.6 24.6zM504 256c0 137-111 248-248 248S8 393 8 256 119 8 256 8s248 111 248 248zm-132.3-41.2c-9.4.0-17.7 3.9-23.8 10-22.4-15.5-52.6-25.5-86.1-26.6l17.4-78.3 55.4 12.5c0 13.6 11.1 24.6 24.6 24.6 13.8.0 24.9-11.3 24.9-24.9s-11.1-24.9-24.9-24.9c-9.7.0-18 5.8-22.1 13.8l-61.2-13.6c-3-.8-6.1 1.4-6.9 4.4l-19.1 86.4c-33.2 1.4-63.1 11.3-85.5 26.8-6.1-6.4-14.7-10.2-24.1-10.2-34.9.0-46.3 46.9-14.4 62.8-1.1 5-1.7 10.2-1.7 15.5.0 52.6 59.2 95.2 132 95.2 73.1.0 132.3-42.6 132.3-95.2.0-5.3-.6-10.8-1.9-15.8 31.3-16 19.8-62.5-14.9-62.5zM302.8 331c-18.2 18.2-76.1 17.9-93.6.0-2.2-2.2-6.1-2.2-8.3.0-2.5 2.5-2.5 6.4.0 8.6 22.8 22.8 87.3 22.8 110.2.0 2.5-2.2 2.5-6.1.0-8.6-2.2-2.2-6.1-2.2-8.3.0zm7.7-75c-13.6.0-24.6 11.1-24.6 24.9.0 13.6 11.1 24.6 24.6 24.6 13.8.0 24.9-11.1 24.9-24.6.0-13.8-11-24.9-24.9-24.9z"/></svg>
</span></a><a target=_blank class="m-1 rounded bg-neutral-300 p-1.5 text-neutral-700 hover:bg-primary-500 hover:text-neutral dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800" href="https://www.facebook.com/sharer/sharer.php?u=https://myseq.github.io/posts/ssh_port_forwarding/&amp;quote=Tunnelling%20with%20SSH%20Port%20Forwarding" title="Share on Facebook" aria-label="Share on Facebook"><span class="relative block icon"><svg viewBox="0 0 512 512"><path fill="currentcolor" d="M504 256C504 119 393 8 256 8S8 119 8 256c0 123.78 90.69 226.38 209.25 245V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14.0 55.52 4.84 55.52 4.84v61h-31.28c-30.8.0-40.41 19.12-40.41 38.73V256h68.78l-11 71.69h-57.78V501C413.31 482.38 504 379.78 504 256z"/></svg></span></a></section><h2 class="mt-8 text-2xl font-extrabold mb-10">Related</h2><section class="w-full grid gap-4 sm:grid-cols-2 md:grid-cols-3"><a href=/posts/encoding_101/ class=min-w-full><div class="min-h-full border border-neutral-200 dark:border-neutral-700 border-2 rounded overflow-hidden shadow-2xl relative"><div class="w-full thumbnail_card_related nozoom" style=background-image:url(/images/featured_p03_hu16559426875564680291.jpg)></div><div class="px-6 py-4"><div class="font-bold text-xl text-neutral-800 decoration-primary-500 hover:underline hover:underline-offset-2 dark:text-neutral" href=/posts/encoding_101/>Encoding 101</div><div class="text-sm text-neutral-500 dark:text-neutral-400"><div class="flex flex-row flex-wrap items-center"><time datetime=2023-08-12T13:00:22+08:00>2023-08-12 13:00</time><span class="px-2 text-primary-500">&#183;</span><span>580 words</span><span class="px-2 text-primary-500">&#183;</span><span title="Reading time">3 mins</span></div><div class="flex flex-row flex-wrap items-center"></div><div class="flex flex-row flex-wrap items-center"><span style=margin-top:.5rem class=mr-2 onclick='return window.open("/categories/posts/","_self"),!1'><span class=flex style=cursor:pointer><span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">Posts
</span></span></span><span style=margin-top:.5rem class=mr-2 onclick='return window.open("/tags/101/","_self"),!1'><span class=flex style=cursor:pointer><span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">101
</span></span></span><span style=margin-top:.5rem class=mr-2 onclick='return window.open("/tags/cli/","_self"),!1'><span class=flex style=cursor:pointer><span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">cli
</span></span></span><span style=margin-top:.5rem class=mr-2 onclick='return window.open("/tags/encoding/","_self"),!1'><span class=flex style=cursor:pointer><span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">encoding</span></span></span></div></div><div class="py-1 prose dark:prose-invert">Some notes about encoding: HTML encoding, URL encoding and ASCII encoding.</div></div><div class="px-6 pt-4 pb-2"></div></div></a><a href=/posts/podman_101/ class=min-w-full><div class="min-h-full border border-neutral-200 dark:border-neutral-700 border-2 rounded overflow-hidden shadow-2xl relative"><div class="w-full thumbnail_card_related nozoom" style=background-image:url(/posts/podman_101/feature_seal_hu12786345390105355599.png)></div><div class="px-6 py-4"><div class="font-bold text-xl text-neutral-800 decoration-primary-500 hover:underline hover:underline-offset-2 dark:text-neutral" href=/posts/podman_101/>Podman 101</div><div class="text-sm text-neutral-500 dark:text-neutral-400"><div class="flex flex-row flex-wrap items-center"><time datetime=2023-08-04T10:34:10+08:00>2023-08-04 10:34</time><span class="px-2 text-primary-500">&#183;</span><span>1829 words</span><span class="px-2 text-primary-500">&#183;</span><span title="Reading time">9 mins</span></div><div class="flex flex-row flex-wrap items-center"></div><div class="flex flex-row flex-wrap items-center"><span style=margin-top:.5rem class=mr-2 onclick='return window.open("/categories/posts/","_self"),!1'><span class=flex style=cursor:pointer><span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">Posts
</span></span></span><span style=margin-top:.5rem class=mr-2 onclick='return window.open("/tags/101/","_self"),!1'><span class=flex style=cursor:pointer><span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">101
</span></span></span><span style=margin-top:.5rem class=mr-2 onclick='return window.open("/tags/podman/","_self"),!1'><span class=flex style=cursor:pointer><span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">podman
</span></span></span><span style=margin-top:.5rem class=mr-2 onclick='return window.open("/tags/cli/","_self"),!1'><span class=flex style=cursor:pointer><span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">cli
</span></span></span><span style=margin-top:.5rem class=mr-2 onclick='return window.open("/tags/tools/","_self"),!1'><span class=flex style=cursor:pointer><span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">tools</span></span></span></div></div><div class="py-1 prose dark:prose-invert">Docker alternative with Podman.</div></div><div class="px-6 pt-4 pb-2"></div></div></a><a href=/posts/f-string/ class=min-w-full><div class="min-h-full border border-neutral-200 dark:border-neutral-700 border-2 rounded overflow-hidden shadow-2xl relative"><div class="w-full thumbnail_card_related nozoom" style=background-image:url(/images/featured_p03_hu16559426875564680291.jpg)></div><div class="px-6 py-4"><div class="font-bold text-xl text-neutral-800 decoration-primary-500 hover:underline hover:underline-offset-2 dark:text-neutral" href=/posts/f-string/>Use of f-string format() in Python</div><div class="text-sm text-neutral-500 dark:text-neutral-400"><div class="flex flex-row flex-wrap items-center"><time datetime=2023-08-02T10:59:26+08:00>2023-08-02 10:59</time><span class="px-2 text-primary-500">&#183;</span><span>242 words</span><span class="px-2 text-primary-500">&#183;</span><span title="Reading time">2 mins</span></div><div class="flex flex-row flex-wrap items-center"></div><div class="flex flex-row flex-wrap items-center"><span style=margin-top:.5rem class=mr-2 onclick='return window.open("/categories/posts/","_self"),!1'><span class=flex style=cursor:pointer><span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">Posts
</span></span></span><span style=margin-top:.5rem class=mr-2 onclick='return window.open("/tags/101/","_self"),!1'><span class=flex style=cursor:pointer><span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">101
</span></span></span><span style=margin-top:.5rem class=mr-2 onclick='return window.open("/tags/python/","_self"),!1'><span class=flex style=cursor:pointer><span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">python</span></span></span></div></div><div class="py-1 prose dark:prose-invert">Using f-string in Python.</div></div><div class="px-6 pt-4 pb-2"></div></div></a></section></div><script>var oid="views_posts/ssh_port_forwarding.md",oid_likes="likes_posts/ssh_port_forwarding.md"</script><script type=text/javascript src=/js/page.min.0860cf4e04fa2d72cc33ddba263083464d48f67de06114529043cb4623319efed4f484fd7f1730df5abea0e2da6f3538855634081d02f2d6e920b956f063e823.js integrity="sha512-CGDPTgT6LXLMM926JjCDRk1I9n3gYRRSkEPLRiMxnv7U9IT9fxcw31q+oOLabzU4hVY0CB0C8tbpILlW8GPoIw=="></script></section><footer class="pt-8 max-w-prose print:hidden"></footer></article><div id=top-scroller class="pointer-events-none absolute top-[110vh] bottom-0 w-12 ltr:right-0 rtl:left-0"><a href=#the-top class="pointer-events-auto sticky top-[calc(100vh-5.5rem)] flex h-12 w-12 mb-16 items-center justify-center rounded-full bg-neutral/50 text-xl text-neutral-700 hover:text-primary-600 dark:bg-neutral-800/50 dark:text-neutral dark:hover:text-primary-400" aria-label="Scroll to top" title="Scroll to top">&uarr;</a></div></main><footer id=site-footer class="py-10 print:hidden"><nav class="flex flex-row pb-4 text-base font-medium text-neutral-500 dark:text-neutral-400"><ul class="flex flex-col list-none sm:flex-row"><li class="flex mb-1 ltr:text-right rtl:text-left sm:mb-0 ltr:sm:mr-7 ltr:sm:last:mr-0 rtl:sm:ml-7 rtl:sm:last:ml-0"><a class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2 flex items-center" href=/blogarchive/ title>[ Archive ]</a></li><li class="flex mb-1 ltr:text-right rtl:text-left sm:mb-0 ltr:sm:mr-7 ltr:sm:last:mr-0 rtl:sm:ml-7 rtl:sm:last:ml-0"><a class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2 flex items-center" href=/categories/ title>Categories</a></li><li class="flex mb-1 ltr:text-right rtl:text-left sm:mb-0 ltr:sm:mr-7 ltr:sm:last:mr-0 rtl:sm:ml-7 rtl:sm:last:ml-0"><a class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2 flex items-center" href=/tags/ title>Tags</a></li><li class="flex mb-1 ltr:text-right rtl:text-left sm:mb-0 ltr:sm:mr-7 ltr:sm:last:mr-0 rtl:sm:ml-7 rtl:sm:last:ml-0"><a class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2 flex items-center" href=/tagcloud/ title>[ TagCloud ]</a></li><li class="flex mb-1 ltr:text-right rtl:text-left sm:mb-0 ltr:sm:mr-7 ltr:sm:last:mr-0 rtl:sm:ml-7 rtl:sm:last:ml-0"><a class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2 flex items-center" href=/series/ title>Series</a></li><li class="flex mb-1 ltr:text-right rtl:text-left sm:mb-0 ltr:sm:mr-7 ltr:sm:last:mr-0 rtl:sm:ml-7 rtl:sm:last:ml-0"><a class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2 flex items-center" href=/authors/ title>Authors</a></li></ul></nav><div class="flex items-center justify-between"><p class="text-sm text-neutral-500 dark:text-neutral-400">© Copyleft 🦖</p><p class="text-xs text-neutral-500 dark:text-neutral-400">Powered by <a class="hover:underline hover:decoration-primary-400 hover:text-primary-500" href=https://gohugo.io/ target=_blank rel="noopener noreferrer">Hugo</a> & <a class="hover:underline hover:decoration-primary-400 hover:text-primary-500" href=https://blowfish.page/ target=_blank rel="noopener noreferrer">Blowfish</a></p></div><script>mediumZoom(document.querySelectorAll("img:not(.nozoom)"),{margin:24,background:"rgba(0,0,0,0.5)",scrollOffset:0})</script><script type=text/javascript src=/js/process.min.ee03488f19c93c2efb199e2e3014ea5f3cb2ce7d45154adb3399a158cac27ca52831db249ede5bb602700ef87eb02434139de0858af1818ab0fb4182472204a4.js integrity="sha512-7gNIjxnJPC77GZ4uMBTqXzyyzn1FFUrbM5mhWMrCfKUoMdsknt5btgJwDvh+sCQ0E53ghYrxgYqw+0GCRyIEpA=="></script><a rel=me href=https://masto.ai/@blowfish></a></footer><div id=search-wrapper class="invisible fixed inset-0 flex h-screen w-screen cursor-default flex-col bg-neutral-500/50 p-4 backdrop-blur-sm dark:bg-neutral-900/50 sm:p-6 md:p-[10vh] lg:p-[12vh]" data-url=https://myseq.github.io/ style=z-index:500><div id=search-modal class="flex flex-col w-full max-w-3xl min-h-0 mx-auto border rounded-md shadow-lg top-20 border-neutral-200 bg-neutral dark:border-neutral-700 dark:bg-neutral-800"><header class="relative z-10 flex items-center justify-between flex-none px-2"><form class="flex items-center flex-auto min-w-0"><div class="flex items-center justify-center w-8 h-8 text-neutral-400"><span class="relative block icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" viewBox="0 0 512 512"><path fill="currentcolor" d="M505 442.7 405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9.0 208 0S0 93.1.0 208s93.1 208 208 208c48.3.0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9.0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7.0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7.0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg></span></div><input type=search id=search-query class="flex flex-auto h-12 mx-1 bg-transparent appearance-none focus:outline-dotted focus:outline-2 focus:outline-transparent" placeholder=Search tabindex=0></form><button id=close-search-button class="flex items-center justify-center w-8 h-8 text-neutral-700 hover:text-primary-600 dark:text-neutral dark:hover:text-primary-400" title="Close (Esc)">
<span class="relative block icon"><svg viewBox="0 0 320 512"><path fill="currentcolor" d="M310.6 361.4c12.5 12.5 12.5 32.75.0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3 54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75.0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75.0-45.25s32.75-12.5 45.25.0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25.0s12.5 32.75.0 45.25l-105.4 105.4L310.6 361.4z"/></svg></span></button></header><section class="flex-auto px-2 overflow-auto"><ul id=search-results></ul></section></div></div></div></body></html>